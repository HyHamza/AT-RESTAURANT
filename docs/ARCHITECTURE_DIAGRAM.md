# Admin PWA Architecture Diagram

## System Overview

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         AT Restaurant                            â”‚
â”‚                      Next.js Application                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚                               â”‚
                â–¼                               â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚     User Section     â”‚        â”‚    Admin Section     â”‚
    â”‚      (Scope: /)      â”‚        â”‚   (Scope: /admin/)   â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚                               â”‚
                â”‚                               â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                       â”‚       â”‚                     â”‚
    â–¼                       â–¼       â–¼                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ User    â”‚         â”‚  User   â”‚ â”‚ Admin   â”‚      â”‚ Admin   â”‚
â”‚Manifest â”‚         â”‚   SW    â”‚ â”‚Manifest â”‚      â”‚   SW    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚                     â”‚           â”‚                â”‚
    â”‚                     â”‚           â”‚                â”‚
    â–¼                     â–¼           â–¼                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  User   â”‚         â”‚  User   â”‚ â”‚ Admin   â”‚      â”‚ Admin   â”‚
â”‚  PWA    â”‚         â”‚ Cache   â”‚ â”‚  PWA    â”‚      â”‚ Cache   â”‚
â”‚ Install â”‚         â”‚         â”‚ â”‚ Install â”‚      â”‚         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Installation Flow

### User App Installation

```
User visits site (/)
        â”‚
        â–¼
User SW registers
(scope: /)
        â”‚
        â–¼
Wait 10 seconds
        â”‚
        â–¼
Show install prompt
(PWAInstall component)
        â”‚
        â–¼
User clicks "Install"
        â”‚
        â–¼
Browser shows dialog
        â”‚
        â–¼
User confirms
        â”‚
        â–¼
App installs with
manifest.json config
        â”‚
        â–¼
User PWA icon created
(Opens to /)
```

### Admin App Installation

```
Admin logs in
        â”‚
        â–¼
Navigate to /admin
        â”‚
        â–¼
Admin SW registers
(scope: /admin/)
        â”‚
        â–¼
Wait 3 seconds
        â”‚
        â–¼
Show install prompt
(AdminPWAInstall component)
        â”‚
        â–¼
Admin clicks "Install"
        â”‚
        â–¼
Browser shows dialog
        â”‚
        â–¼
Admin confirms
        â”‚
        â–¼
App installs with
admin-manifest.json config
        â”‚
        â–¼
Admin PWA icon created
(Opens to /admin)
```

## Service Worker Scoping

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Browser Window                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                          â”‚
â”‚  URL: https://example.com/                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚         User Service Worker (/)                 â”‚    â”‚
â”‚  â”‚  - Handles all routes                           â”‚    â”‚
â”‚  â”‚  - Cache: at-restaurant-*                       â”‚    â”‚
â”‚  â”‚  - Manifest: /manifest.json                     â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                          â”‚
â”‚  URL: https://example.com/admin                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚       Admin Service Worker (/admin/)            â”‚    â”‚
â”‚  â”‚  - Handles /admin/* routes only                 â”‚    â”‚
â”‚  â”‚  - Cache: at-restaurant-admin-*                 â”‚    â”‚
â”‚  â”‚  - Manifest: /admin-manifest.json               â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Component Hierarchy

### User App Layout

```
RootLayout (src/app/layout.tsx)
â”œâ”€â”€ <head>
â”‚   â””â”€â”€ <link rel="manifest" href="/manifest.json" />
â”œâ”€â”€ ToastProvider
â”œâ”€â”€ AdminProvider
â”œâ”€â”€ CartProvider
â”‚   â”œâ”€â”€ OfflineInit
â”‚   â”œâ”€â”€ Header
â”‚   â”œâ”€â”€ {children}
â”‚   â”œâ”€â”€ Footer
â”‚   â”œâ”€â”€ OfflineIndicator
â”‚   â””â”€â”€ PWAInstall â† User install prompt
â””â”€â”€ </body>
```

### Admin App Layout

```
AdminLayout (src/app/admin/layout.tsx)
â”œâ”€â”€ <Head>
â”‚   â””â”€â”€ <link rel="manifest" href="/admin-manifest.json" />
â”œâ”€â”€ Sidebar
â”‚   â”œâ”€â”€ Navigation
â”‚   â””â”€â”€ User Info
â”œâ”€â”€ Main Content
â”‚   â”œâ”€â”€ Top Bar
â”‚   â””â”€â”€ {children}
â”œâ”€â”€ AdminPWAInstall â† Admin install prompt
â””â”€â”€ AdminNotifications
```

## Data Flow

### User App

```
User Action
    â”‚
    â–¼
React Component
    â”‚
    â–¼
API Request
    â”‚
    â–¼
User Service Worker
    â”‚
    â”œâ”€â†’ Network Available â†’ Fetch from API
    â”‚                        â”‚
    â”‚                        â–¼
    â”‚                    Cache Response
    â”‚                        â”‚
    â”‚                        â–¼
    â”‚                    Return Data
    â”‚
    â””â”€â†’ Network Offline â†’ Return Cached Data
```

### Admin App

```
Admin Action
    â”‚
    â–¼
React Component
    â”‚
    â–¼
API Request
    â”‚
    â–¼
Admin Service Worker
    â”‚
    â”œâ”€â†’ Network Available â†’ Fetch from API
    â”‚                        â”‚
    â”‚                        â–¼
    â”‚                    Cache Response
    â”‚                        â”‚
    â”‚                        â–¼
    â”‚                    Return Data
    â”‚
    â””â”€â†’ Network Offline â†’ Return Cached Data
                           or Admin Offline Page
```

## Cache Strategy

### User App Caches

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     at-restaurant-v9 (Main)          â”‚
â”‚  - /offline                          â”‚
â”‚  - /favicon.ico                      â”‚
â”‚  - Critical assets                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  at-restaurant-runtime-v9            â”‚
â”‚  - Dynamic pages                     â”‚
â”‚  - Images                            â”‚
â”‚  - Styles                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  at-restaurant-api-v9                â”‚
â”‚  - API responses                     â”‚
â”‚  - Menu data                         â”‚
â”‚  - Order data                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Admin App Caches

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  at-restaurant-admin-v1 (Main)       â”‚
â”‚  - /admin                            â”‚
â”‚  - /admin/orders                     â”‚
â”‚  - /admin/menu                       â”‚
â”‚  - /admin/users                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  at-restaurant-admin-runtime-v1      â”‚
â”‚  - Admin pages                       â”‚
â”‚  - Admin assets                      â”‚
â”‚  - Admin styles                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  at-restaurant-admin-api-v1          â”‚
â”‚  - Admin API responses               â”‚
â”‚  - Order data                        â”‚
â”‚  - User data                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## State Management

### Installation State

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Browser LocalStorage                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                      â”‚
â”‚  User App State:                                    â”‚
â”‚  â”œâ”€ pwa-installed: "true"                          â”‚
â”‚  â”œâ”€ pwa-install-prompt-seen: "true"                â”‚
â”‚  â””â”€ pwa-ios-install-prompt-seen: "true"            â”‚
â”‚                                                      â”‚
â”‚  Admin App State:                                   â”‚
â”‚  â”œâ”€ admin-pwa-installed: "true"                    â”‚
â”‚  â”œâ”€ admin-pwa-install-prompt-seen: "true"          â”‚
â”‚  â””â”€ admin-pwa-ios-install-prompt-seen: "true"      â”‚
â”‚                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Device View

### Home Screen After Both Installations

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Mobile Device                â”‚
â”‚                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚      â”‚  â”‚      â”‚  â”‚      â”‚      â”‚
â”‚  â”‚ ğŸ½ï¸   â”‚  â”‚ ğŸ›¡ï¸   â”‚  â”‚      â”‚      â”‚
â”‚  â”‚      â”‚  â”‚      â”‚  â”‚      â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚     AT        AT                    â”‚
â”‚  Restaurant  Admin                  â”‚
â”‚                                      â”‚
â”‚  Opens to:  Opens to:               â”‚
â”‚     /         /admin                â”‚
â”‚                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Network Requests

### Request Routing

```
Browser Request
      â”‚
      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Is URL /admin/* ?â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚
      â”œâ”€ Yes â”€â”€â†’ Admin Service Worker
      â”‚              â”‚
      â”‚              â”œâ”€ Check admin cache
      â”‚              â”œâ”€ Fetch from network
      â”‚              â””â”€ Return response
      â”‚
      â””â”€ No â”€â”€â”€â†’ User Service Worker
                     â”‚
                     â”œâ”€ Check user cache
                     â”œâ”€ Fetch from network
                     â””â”€ Return response
```

## Security Boundaries

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  Security Layer                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                      â”‚
â”‚  User App                    Admin App              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚ Public       â”‚           â”‚ Protected    â”‚       â”‚
â”‚  â”‚ Access       â”‚           â”‚ Access       â”‚       â”‚
â”‚  â”‚              â”‚           â”‚              â”‚       â”‚
â”‚  â”‚ No Auth      â”‚           â”‚ Requires     â”‚       â”‚
â”‚  â”‚ Required     â”‚           â”‚ Admin Login  â”‚       â”‚
â”‚  â”‚              â”‚           â”‚              â”‚       â”‚
â”‚  â”‚ Scope: /     â”‚           â”‚ Scope:       â”‚       â”‚
â”‚  â”‚              â”‚           â”‚ /admin/      â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Offline Behavior

### User App Offline

```
User opens app (offline)
        â”‚
        â–¼
Service Worker intercepts
        â”‚
        â–¼
Check cache
        â”‚
        â”œâ”€ Found â”€â”€â†’ Return cached page
        â”‚
        â””â”€ Not Found â”€â”€â†’ Return /offline page
                         (Generic offline message)
```

### Admin App Offline

```
Admin opens app (offline)
        â”‚
        â–¼
Admin Service Worker intercepts
        â”‚
        â–¼
Check admin cache
        â”‚
        â”œâ”€ Found â”€â”€â†’ Return cached admin page
        â”‚
        â””â”€ Not Found â”€â”€â†’ Return admin offline page
                         (Admin-specific offline message)
```

## Update Flow

### Service Worker Update

```
User/Admin opens app
        â”‚
        â–¼
Check for SW update
        â”‚
        â”œâ”€ No update â”€â”€â†’ Use current SW
        â”‚
        â””â”€ Update available
                â”‚
                â–¼
        Download new SW
                â”‚
                â–¼
        Install new SW
                â”‚
                â–¼
        Wait for activation
                â”‚
                â–¼
        Activate new SW
                â”‚
                â–¼
        Clear old caches
                â”‚
                â–¼
        Notify user/admin
```

---

This architecture ensures complete separation between user and admin PWA installations while maintaining optimal performance and user experience for both.
